{% extends "base.html" %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename= 'css/logo.css') }}">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@800&display=swap" rel="stylesheet">
    <script src="{{ url_for('static', filename= 'js/inside/sideNav.js') }}"></script>
    <script src="{{ url_for('static', filename= 'js/feed/forms.js') }}" async></script>
{% endblock %}

{% block body %}
    <nav>
        <div class="nav-wrapper pink accent-3 z-depth-5">
            <div class="brand-logo">
                <img id="logo" src="/img/logo.png" width="60" height="60">
                <a href="#!" style="font-family: 'Raleway', sans-serif;"class="brand-logo"> Folunga</a>
            </div>
            <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
            <ul class="right hide-on-med-and-down">
                <li><a href="{{ url_for('feed') }}">Feed</a></li>
                <li><a href="{{ url_for('user', username = session['username']) }}">My page</a></li>
                <li><a href="">Messenger</a></li>
                <li><a href="{{ url_for('friends') }}">Friends</a></li>
                <li><a href="{{ url_for('make_new_friends') }}">Make new friends</a></li>
                <li><a href="{{ url_for('logout') }}">Log out</a></li>
            </ul>
        </div>
    </nav>

    <ul class="sidenav" id="mobile-demo">
        <li><a href="{{ url_for('feed') }}">Feed</a></li>
        <li><a href="{{ url_for('user', username = session['username']) }}">My page</a></li>
        <li><a href="">Messenger</a></li>
        <li><a href="">My friends</a></li>
        <li><a href="{{ url_for('make_new_friends') }}">Make new friends</a></li>
        <li><a href="{{ url_for('logout') }}">Log out</a></li>
    </ul>
    <div class="row">
        <div class="col s12 white z-depth-5" style="height: 100%; min-height: 95vmin !important;">
            <div class="row s12 blue" style="height: 100%; min-height: 95vmin !important;">
					<div class="row">
						{% if list_stories is not none: %}
							{% for story in list_stories %}
                            <div class="row">
                                <div class="col s12 m3 offset-m5">
                                    <div class="card horizontal">
                                        <div class="card-image">
                                            <img src="/img/profile_photos/{{ story.username }}.jpg" style="border-radius: 50%; width: 70px; height: 70px; top: 20%; left:10%;">
                                        </div>
                                        <div class="card-stacked">
                                            <div class="card-content">
                                                <div class="row">
                                                    <div class="input-field col s12">
                                                        <span class="black-text">
                                                            {{ story.text }}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

							{% endfor %}
						{% endif %}
                        <div class="col s12 m3 offset-m5" style=" position:absolute; bottom:0%;">
                            <div class="card horizontal">
                                <div class="card-image">
                                    <img src="/img/profile_photos/{{ session['username'] }}.jpg" style="border-radius: 50%; width: 70px; height: 70px; top: 20%; left:10%;">
                                </div>
                                <div class="card-stacked">
                                    <form class="col s12" id="new-story-form">
                                        <div class="card-content">
                                            <div class="row">
                                                <div class="input-field col s12">
                                                    <textarea id="story_text" class="materialize-textarea" data-length="40" maxlength="40" style="max-height: 3rem !important; position:absolute; top: 20%;" ></textarea>
                                                    <label for="textarea2">What's happening?</label>
                                                </div>
                                            </div>
                                        </div>
                                        <button class="btn waves-effect waves-light right" type="submit" name="action">Submit
                                            <i class="material-icons">send</i>
                                        </button>
                                    </form>
                            </div>
                        </div>
                    </div>
				</div>
			</div>
        </div>
  
    </div>
{% endblock %}

<script>
    $(document).ready(function() {
        $('textarea#textarea1').characterCounter();
    });
</script>